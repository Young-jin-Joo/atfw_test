import streamlit as st

# 방산기술목록서 필요하면 사용
DEFENSE_TECH_TREE = {
 "센서": {
        "레이더센서": {
            "전자파 표적신호 정밀 측정/분석 기술": "다양한 표적의 전자파 반사특성을 측정하고 데이터베이스화하여 표적인식 등에 적용하는 기술",
            "고감도 레이더 송수신 기술": "안테나로 송신하기 위한 전자파 신호를 생성하거나, 수신된 신호를 처리 가능한 주파수와 크기로 변환하는 기술",
            "레이더 고속신호처리 기술": "수신신호로부터 표적신호를 추출하고, 클러터(clutter)와 재머(jammer) 등의 간섭 신호를 제거하는 기술",
            "고성능 레이더 안테나 기술": "복사소자, 배열안테나, 송수신배열모듈, 배열 설계 기술 등 전자파를 송·수신하는 안테나의 최적 설계를 위한 기술",
            "다기능 레이더 통제/제어 기술": "다기능 레이더의 목적에 따라 표적탐지, 추적 기능 및 자원관리, 제어, 인터페이스 기능을 수행하는 기술",
            "양자 주파수 변환기술": "스텔스 무기체계에 대응하기 위한 군용 양자레이더의주요기술로 광파-마이크로파 간 주파수 양방향 변환을 통해 장거리 표적을 탐지하기 위한 신호변환 기술"
        },
        "SAR센서": {
            "고출력 SAR 송수신 기술": "광대역 펄스신호를 반송주파수에 실어 안테나로 보내고, 안테나로부터 수신된 광대역 신호를 기저대역 신호로 변환하는 기술",
            "SAR 고속 신호처리/영상형성 기술": "기저대역으로 변환된 광대역 원시데이터를 고속으로 처리하고 SAR영상으로 가시화 및 보정하는 기술",
            "고성능 SAR 안테나 기술": "SAR의 송신기로부터 발생된 광대역 신호를 방사하고, 관측영역에서 반사된 전자파를 수신하는 기술",
            "SAR 자동영상처리/분석 기술": "가시화된 SAR영상을 후처리 등의 기술을 이용하여 화질을 개선하고, 해당 영상을 판독/분석하여 정보를 제공하는 기술"
        },
        "EO/IR센서": {
            "표적탐지 및 추적 기술": "전자광학장비에서 획득된 영상을 기반으로 신호처리를 통하여 표적을 탐지 및 추적하는 기술과 표적추적 시 시선(시계)을 유지하기 위한 짐벌(gimbal)의 정밀 제어/구동 기술",
            "광파탐지 및 처리 기술": "검출기에서 발생하는 신호를 영상신호처리에 적합한 신호로 변환시킨 후 고화질 영상을 획득하는 기술",
            "광 집속 기술": "광자를 효율적으로 검출기 한 면에 모으는 기술로 주·야간 배경 및 표적의 반사광 또는 에너지를 적절하게 수집 및 획득 가능하게 하는 기술"
        },
        "소나센서": {
            "어뢰 음향대항 기술": "음향소음 또는 기만신호를 생성하는 등 적의 어뢰공격을 다양한 방법으로 경보/교란하여 어뢰공격능력을 저하시키는 기술",
            "음향신호 DB구축 기반 표적식별 기술": "음파전달에 영향을 미치는 해양환경 변수 및 표적신호를 수집/분석하고, 구축된 데이터베이스를 기반으로 수중 표적을 식별하는 기술",
            "고감도 음향센서 기술": "수중에서 음향을 이용하여 표적을 탐지 및 추적하기 위해 전기적 신호를 음향 신호로 변환하여 송신하고, 음향신호를 전기적 신호로 변환하여 수신하는 장치와 관련된 기술",
            "고출력 소나 신호 송수신 기술": "저/중/고주파대역의 고출력 음향신호를 송수신하여 표적을 탐지/추적/식별하는 기술",
            "소나 신호처리 기술": "수신음향의 환경소음 및 잔향음, 허위표적 정보 등을 제거하고 표적을 탐지하기 위한 고속 신호처리 기술",
            "소나 정보처리 기술": "소나로 수집된 정보를 이용하여 표적을 추적/식별하기 위해 표적인자 추출, 추적 필터 적용, 정보융합 등과 같이 정보를 분석 처리하는 기술"
        },
        "레이저센서": {
            "표적거리 측정 기술": "표적과 상대 운동하는 수신기에 수신된 레이저 광신호로부터 표적의 변화, 3차원 공간상의 위치 정보 및 거리 등의 정보를 획득하기 위한 신호처리 기술"
        },
        "항법센서": {
            "관성센서/항법 기술": "자신의 움직임(회전, 가속도)을 감지하는 관성센서 관련 기술과 이종센서를 통합/교정하여 실시간으로 위치, 자세, 속도정보를 파악하는 기술",
            "다중항법 기반 위치 오차 보정 기술": "위성항법, 비관성센서, 관성센서 등의 항법센서 정보를 통합/보정하여 항법장치의 정확도 및 신뢰도를 증대시키는 기술"
        },
        "특수센서": {
            "다목적 계측센서 및 고속신호처리 기술": "계측 대상에 대한 특성을 측정하고 분석하기 위한 기술로, 특히 진동, 변위, 온도, 압력, 힘 등의 물리량을 측정 및 분석하는 기술",
            "다중 생체센서 및 정밀 신호처리 기술": "전투원의 체온, 맥박, 심전도, 근전도, 가속도 등 생체신호를 계측하여 전기적인 신호로 변환하고 데이터베이스화를 통해 상태를 분석하는 기술",
            "다중 자기장센서 기반 표적 신호처리 기술": "표적의 탐지/식별을 위해 표적으로부터 발생되는 자기장 신호의 크기와 방향을 감지하고, 전기적인 신호로 변환하여 측정하는 기술"
        }
    },

    "정보통신": {
        "전장상황인식": {
            "전장정보 자동 융합 기술": "다출처 정보의 수집으로부터 의미 있는 정보를 분석/융합하여 신뢰성 있는 정보를 생산하고, 군사정보로부터 새로운 지식을 추출하여 정보 생산에 적용하는 순환체계를 구축함으로써 전장상황을 인식하기 위한 기술",
            "국방 C4I체계용 고성능 정보 공유 및 가시화 기술": "획득/생산된 정보를 NCW 환경에서 적재적소에 분배 및 공유하고 전장상황을 종합 가시화하기 위한 정보공유, 실시간 협업처리, 전장 지능형 가시화 등과 관련된 기술",
            "전장위협 분석 및 인지 기술": "피아식별을 포함하여 작전상황 및 전장 상태를 특징화하고 정의된 정보를 통하여 현재 전장 상황을 인지하는 기술",
            "최적 작전계획 수립 및 통제 기술": "수행해야 하는 임무를 도출하여 적절한 방책을 분석하고, 최적의 작전계획으로 아군의 운용방법을 결정하여 작전계획을 수립/통제하는 기술",
            "전장정보 탐지/식별/분석 지능화 기술": "다양한 정보 자산으로부터 획득한 이미지/영상/음성 등의 데이터를 활용하여 전장정보(표적, 위치, 지형 등)를 자동으로 탐지/식별하고 전장의 변화/위협/징후를 다중으로 분석하는 기술"
        },
        "상호운용성": {
            "국방 C4I체계용 상호운용성 공통기반 기술": "운용/체계/기술적 상호운용성을 보장하고 지원하기 위해 체계 구축과는 독립적으로 실시간 고장감지, 구성 노드간 데이터 분배, 데이터 동기화 등의 기능을 제공하는 공통적인 상호운용성 기술",
            "상호운용성 평가 및 검증 기술": "이종 무기체계들 사이에 필요한 정보를 상호 활용하기 위한 무기체계 개발단계별 상호운용성 요구수준 평가 기술과 네트워크 기반 정보패턴 분석을 통한 상호운용성 평가 기술로 인증절차 및 방법론, 시험도구 등의 개발 및 관리에 활용하기 위한 검증 기술",
            "이기종 체계 연동 기술": "분산 컴퓨팅 환경에서 타 체계의 하드웨어나 이종 통신 프로토콜, 통신환경 등을 고려하여 각 무기체계 또는 응용프로그램들 간 통신이 원활히 이루어질 수 있도록 연동 기능을 제공하는 기술"
        },
        "국방 S/W": {
            "국방 S/W 개발 기술": "무기체계 S/W 개발과 관련된 요구사항 분석, 설계, 구현, 시험 등을 포함하는 국방 무기체계용 S/W 개발 기술",
            "무기체계탑재용시스템 정보처리 기술": "무기체계에 탑재되어 임무목적에 맞는 기능을 구현하기 위한 SW의 고효율, 고속 처리 알고리즘을 설계하고, 정보를 처리하는 기술",
            "무기체계 시스템 인터페이스 기술": "무기체계에 탑재되는 시스템의 효과적인 정보입력과 정보를 시각화하여 디스플레이 장치로 보여주거나 정보를 외부로 출력하는 기술"
        },
        "통신전송": {
            "항재밍/저피탐 웨이브폼 기술": "자연적 전파간섭 또는 적의 의도적인 전자공격을 회피하거나 적에 의한 피탐을 불가능하게 하는 은닉통신 기술",
            "고신뢰도 수신신호 재송출 기술": "수신신호를 증폭시키고 중계기를 거치면서 발생한 잡음을 최소화하여 재송출하는 기술",
            "주파수 대상 자동선별 기술": "다중접속, 셀 플랜, 인지 무선(CR) 기능 등을 통해 다수 사용자의 망계획을 분석하여 자동으로 주파수를 할당하여 트래픽 과부하를 최소화하는 기술",
            "은밀 수중통신 기술": "수중에서 확보한 탐지정보 및 지휘소의 전술정보를 은밀하게 교환하기 위한 수중 정보교환 기술"
        },
        "통신교환": {
            "군 통신용 링크 선택 기술": "주소정보 및 다양한 옵션 정보를 포함하여 패킷데이터를 최적의 경로로 포워딩하는 기술"
        },
        "통신단말": {
            "전술환경 기반 SWaP(공간･무게･전력) 절감 기술": "통신단말을 소형, 경량화, 저전력으로 이동성을 높이고 전력소비를 절감하는 기술",
            "전술환경 기반 신호 송수신 기술": "송신단에서 RF신호의 주파수를 발생, 변환, 여파, 증폭하고 수신단에서 RF신호를 수신하는 과정에 걸쳐서 발생하는 잡음을 최소화하여 수신하는 무선통신 기술",
            "광대역 통신 기술": "안테나와마스트등관련장비및그장비들의 동작 상태를 제어하고 지상, 해상, 공중 계층으로 노이즈를 최소화하여 전자파를 송수신하는 기술"
        },
        "네트워크구성/관리": {
            "전술망 구축을 위한 통신망 구성/관리/운영 기술": "지상, 공중, 해상플랫폼 무기체계의 전술망 구축을 위하여 네트워크의 설계, 통합, 처리, 연동, Ad-hoc 등을 관리하는 기술",
            "C4I 체계간데이터링크 정보교환 기술": "이기종 체계에서 획득된 자료를 무기체계 간 상호운용성을 보장하기 위해 메시지 포맷 설계와 각종 무기체계에서 생성되는 상황정보를 해당 메시지 포맷으로 변환하여 전파하는 기술"
        },
        "사이버전": {
            "사이버 기반용 인증/접근 통제기술": "군 정보시스템에서 사용되는 키 생성, 배포, 저장, 관리에 관한 알고리즘과 신원 정보 기반으로 중요정보/시스템/자원에 대한 접근권한을 통제하는 기술",
            "사이버 방어용 시스템 침입예방 기술": "통신시스템과 컴퓨터시스템에 가해지는 사이버침입을 예방하기 위한 취약점 분석 및 내장형 보안 RTOS, 보안 소프트웨어 등의 침입예방 기술",
            "사이버기반용암복호화 기술": "군 정보시스템 및 암호장비 정보를 보호하기 위해 전송 데이터 및 저장 데이터를 암호화, 복호화하는 기술",
            "사이버 방어용 침입 탐지 및 대응 기술": "국방 정보체계에 있는 시스템/네트워크의 이벤트 정보를 수집 분석하여 사이버 공격을 탐지 및 대응하는 기술",
            "국방 사이버 위협 침입 추적기술": "사이버 보안 공격에 효과적으로 대비하기 위해 실질적 공격 근원지 정보를 역추적하는 기술로 다양한 데이터의 융합과 추론을 통해 침입을 탐지 및 분석하는 기술",
            "사이버 방어용 침입 복구/감내 기술": "악성코드등외부적인요인으로부터시스템이 손상되거나 프로그램이 정상적으로 구동되지 않는 환경을 감내하거나, 피해시스템의 기능을 복구하는 기술"
        },
        "전자전": {
            "전자파 방향 및 위치 탐지 기술": "외부에서 방사되어 들어오는 전자파의 신호 세기, 위상차, 도착 시간차 및 주파수 변이 등을 분석하여 전파원의 방향과 위치를 탐지하는 기술",
            "전자전 정보 탐지/분석 기술": "광범위한 전자파 활동 감시를 위해 전자파 에너지를 수신, 탐지, 분석 및 식별하고 정보를 추출하기 위한 정보수집 분석 기술",
            "재밍신호 발생 기술": "적 신호정보를 분석하여 상황에 적합한 재밍신호를 발생하는 기술",
            "고출력 재밍 송신 기술": "재밍신호를 방사하기 위한 고출력 증폭, 지향성 송신, 고전압 발생 및 관련 장치 기술"
        },
        "국방M&S": {
            "전투모의를 위한 교전 시뮬레이션 기술": "무기체계 및 군사작전 정보를 기반으로 전투모의에 필요한 일련의 교전모의논리를 표현하고 시뮬레이션하는 기술",
            "국방 M&S체계 모델링 기술": "국방 M&S 모델의 시뮬레이션 개발을 위한 실제 개체/부대/환경을 활용한 전장환경 및 임무공간 모델링 기술",
            "국방 M&S체계 L-V-C 통합 연동 기술": "무기체계 및 군사작전 정보 기반의 국방 M&S 모델용 Live(실기동), Virtual(시뮬레이션), Constructive(워게임) 모델 연동에서 두 가지 또는 그 이상을 실시간으로 연동하기 위한 기술",
            "무기체계 모의 연습･훈련 장비 개발 기술": "무기체계 및 군사작전 정보를 기반으로 가상환경에서 실제 무기체계 시스템의 기능, 성능 구현 및 검증을 위한 모의훈련 장비 관련 기술",
            "국방 M&S 지원 기술": "국방 M&S의 체계 개발을 위한 주요 교전 사건, 전장환경, 모의개체의 상태정보 등 무기체계 및 군사작전 관련 정보를 저장/교환/제공하는 기술",
            "무기체계 성능/특성 분석 기술": "무기체계 또는 무기체계에 포함된 부체계들의 개발을 위해 해당품목의 성능 및 특성에 따른 각종 효과에 대한 정보를 수집하고, 분석/예측하는 기술"
        }
    },
    "제어전자": {
        "무인자율": {
            "군사용 무인체계 원격 제어 기술": "다양한 무선통신 네트워크를 기반으로 군사용 무인체계를 안정적으로 운용/통제하는 기술",
            "군사용 무인체계 통합 자율제어 기술": "환경인식 정보를 기반으로 환경정보 분석 및 상황 판단을 통해 군사용 무인체계를 자율적으로 제어하는 기술",
            "군사용 무인체계 인식/처리 기술": "군사용 무인체계에 탑재되어 감지센서로부터 획득된 정보를 처리하여 지형/지물/표적을 인식 및 분류하는 기술"
        },
        "유도조종": {
            "무인체계용 임무계획 수립 기술": "무인체계 임무 수행을 위하여 최적의 경로, 고도, 심도 등을 판단하여 지정된 경로점에서 임무를 효율적으로 수행할 수 있도록 계획을 수립하는 기술",
            "고기동, 정밀타격 유도 조종 기술": "유도탄, 어뢰, 탄약 등의 무기체계가 목표를 달성하기까지 요구되는 공간상의 운동 궤적을 결정하고 그 궤적을 따라서 운동하도록 제어하기 위한 유도/조종 알고리즘을 설계하는 기술"
        },
        "사격제어": {
            "다중 교전 통제 기술": "표적의 탐지, 추적 기능 및 자원 관리 인터페이스를 포함한 다표적, 다무장 체계에서 표적의 요격/타격을 위한 표적 식별, 교전 결심, 평가 등의 기능을 수행하는 일련의 자동화된 통제기술",
            "무장 연동 및 발사통제 기술": "화포류, 유도무기류, 로켓 등 무장의 정밀 타격을 위한 발사 및 원격유도 통제 기술 및 통제장비 관련 기술",
            "사격 운용/통제 기술": "지정된 표적을 무력화하기 위한 목적으로 무장에 대한 사격제원 입력/계산, 발사절차 진행, 플랫폼과의 연동 등의 기능을 수행하여 발사장비를 운용/통제하는 기술"
        },
        "구동": {
            "플랫폼 구동장치 기술": "플랫폼의 제어를 위해 대상물을 구동하는 장치와 관련된 기술",
            "플랫폼 구동제어 기술": "대상물의 위치 및 속도 조절, 조준, 조종 등 목적을 달성하도록 구동하기 위한 제어기술"
        },
        "특수제어/전자": {
            "군사용 비행체 정밀 제어 기술": "군사용 항공기, 유도무기 등의 비행체 탑재 전자장비에 사용되는 기술로 비행체를 제어하는 시스템의 하드웨어 및 소프트웨어와 알고리즘을 설계하는 기술",
            "군사용 지상체 정밀 제어 기술": "지상에서 운용되는 전투차량과 플랫폼에 탑재되는 전자장비 등의 정밀 제어를 위한 전자/기계적 장치 관련 기술",
            "군사용 해양체 정밀 제어 기술": "선박, 수중체 등 군사용 해양체의 정밀 제어를 위하여 무인체계 자율운항, 수상함 자세안정화 등과 관련된 구동장치 및 제어와 관련된 기술"
        }
    },
    "탄약/에너지": {
        "탄두": {
            "탄두 구조체 설계/구현 기술": "표적에 대한 파괴효과를 고려하여 파편, 폭압, 관통(또는 침투) 등의 살상기구(Kill Mechanism)로 표적에 피해를 입힐 수 있는 기능을 갖춘 탄두 구조체 기술",
            "탄두 구조체 충전물질 기술": "목표물에 피해를 입힐 수 있도록 고폭, 파편, 관통, 소이, 조명, 열압력, 기만 등 탄두효과를 구현하기 위해 탄두 구조체에 충전되어 있는 에너지원과 관련된 물질 조성/제조 기술",
            "탄 회피/기만 기술": "아군을 향해 공격해 오는 탄에 탑재된 RF 센서 또는 IR센서 등을 유인 혹은 교란하여 아군의 생존성을 극대화하는 기술",
            "탄두 정밀 유도/조종 기술": "목표물을 정밀 타격하기 위한 비행궤도 수정장치, 비행보조킷트 적용 등을 통해 탄두를 유도/조종하는 기술"
        },
        "신관": {
            "탄약안전장전장치설계/구현 기술": "평시(저장, 수송, 취급시) 탄약의 안전상태를 유지하고, 발사시 탄약을 장전시키는 기술",
            "신관 정밀제어 기폭장치 기술": "표적을 판단하여 적절한 시점에 탄두/탄약의 주에너지원을 기폭시켜 무기체계 효과를 극대화 할 수 있는 기술"
        },
        "추진체": {
            "탄약 및 발사체 추진제 기술": "발사체, 유도무기, 탄약 등의 추진력을 발생시키기 위해 필요한 에너지물질을 합성하고, 외부의 충격 또는 에너지로부터 쉽게 점화되지 않는 안정성을 확보하기 위한 기술",
            "점화장치 기술": "발사체, 유도무기, 탄약 등을 원하는 목표로 이동시키기 위해 추진력을 발생시킬 수 있도록 화약, 플라즈마, 레이저 등을 활용하여 추진제를 점화하는 기술",
            "추진체 구조 기술": "발사체, 유도무기, 탄약 등에 추진력을 발생시키기 위한 추진제를 내포한 추진체 구조와 관련된 기술"
        },
        "지향성에너지": {
            "고출력레이저발생기술": "표적을 기만 또는 공격하기 위하여 광섬유 자체를 이득매질로 하여 레이저를 발생시키거나 고출력 중적외선 레이저를 발생하는 기술",
            "레이저 빔 정밀추적 조준/집속 기술": "표적의 이동을 정밀하게 추적하여 고출력의 레이저 빔을 조사가 완료될 때까지 표적 취약부위에 조준 및 집속하는 기술",
            "고출력 전자파 발생원 기술": "비살상 무력화를 위해 전기에너지를 고출력 전자파(마이크로파, 밀리미터파)로 변환하고, 발생된 전자파를 표적을 향해 방사하기 위한 안테나 관련 기술",
            "다목적 대전력 펄스 발생 기술": "전자력 추진 등 다양한 목적을 위해 대용량의 전기에너지를 저장하고 스위칭하여 대전력 펄스를 발생시키는 기술"
        },
        "비살상무력화": {
            "비살상 무기효과도 분석 기술": "장비, 시설, 대인 무력화무기 등 비살상무기에 의한 대상표적의 피해 효과를 정량적으로 분석하는 기술",
            "전력망 무력화/비살상탄 기술": "인체에 영향을 미치지 않고 전력 장비나 시설을 무력화시킬 수 있는 비살상탄의 설계 및 제작 기술"
        },
        "전원/전력발생/공급": {
            "무기체계 전력 발생 및 변환 기술": "무기체계 운용에 필요한 동력을 발생시키고 동력원의 전력을 무기체계의 형태나 용도에 맞게 전기 에너지로 변환/충전하기 위한 장치 관련 기술",
            "무기체계 전력저장 및 방출 기술": "생산된 에너지를 전시 상황에 적합하도록 전투장비에 효율적으로 저장하거나 저장된 에너지를 효율적으로 방출하기 위한 기술"
        }
    },
    "추진": {
        "공기흡입추진": {
            "고출력 가스터빈엔진 시스템 기술": "압축된 공기를 연료와 혼합 및 연소시키고 연소된 가스를 이용하여 터빈 구동 후 고압가스 배출을 통해 비행체의 추진력을 발생시키기 위한 연소기, 터빈, 팬, 압축기 등의 관련 구성품 및 엔진 시스템에 대한 설계/제작 기술",
            "고효율 내연기관 추진 기술": "기동장비나 함정 또는 잠수함 등에서 연료를 연소시켜 구동에 필요한 에너지를 발생시키기 위한 내연기관 추진 기술",
            "초음속/극초음속 램/스크램제트엔진 추진 기술": "충격파를 이용하여 공기를 압축한 후 연료를 분사, 혼합 및 연소시켜 배기노즐로 배출함으로써 추력을 얻는 고체/액체 램제트 엔진, 이중램제트엔진, 덕티드 로켓엔진 및 스크램제트 엔진 등의 기술"
        },
        "로켓추진": {
            "저비용 고효율 고체 로켓 추진 기술": "비행체에 추력을 발생시키기 위해 연료와 산화제를 혼합시켜 고형화한 추진제를 금속/비금속의 연소관/노즐 구조체 내부에서 연소시켜 가스를 분출하는 로켓추진 기술",
            "고출력 액체로켓 추진 기술": "액체추진제를 사용하는 로켓추진기술로서 연료와 산화제가 분리되어 저장되므로 추력량 조절이나 소화 후 재점화가 가능한 형태의 로켓추진기술"
        },
        "전기추진": {
            "무기체계 연료전지 동력발생 및 전달 기술": "밀폐환경에서 운용되는 무기체계 추진장치 동력을 얻기 위해 순수 수소와 순수 산소의 전기화학반응으로 화학에너지를 전기에너지로 전환시키는 전원시스템 관련 기술",
            "전기 동력전달 기술": "배터리 등의 전기에너지 저장장치로부터 전기를 생산하여 전기 구동기를 통해 원하는 형태의 동력으로 변환/전달하는 기술",
            "고효율 하이브리드 시스템 기술": "두 가지 이상 동력발생원으로부터 생산된 에너지를 기반으로 전기구동기를 통해 원하는 형태의 동력으로 변환/전달하는 추진기술"
        },
        "특수추진": {
            "신개념 추진 시스템 기술": "일반적인 추진 장치와 다르게 유압, 공기압, 자기력 등을 이용한 여타의 추진기술을 이용하여 원하는 형태의 동력으로 변환/전달하는 장치기술",
            "전자기 유체 추진 기술": "고온･고속의 도전성 유체를 강한 자계 속에서 주행시켜 발생하는 전자력을 이용하여 원하는 형태의 동력으로 변환/전달하는 장치 기술"
        }
    },
    "화생방": {
        "화생방탐지/식별/경보": {
            "화생방 접촉 탐지/식별 기술": "화생방작용제를 분광법, 질량분석법, 이온분석법 등의 분석기술을 기반으로, 근거리 또는 시료흡입구의 직접적인 접촉을 통해 대상 작용제를 탐지/식별하는 기술",
            "화생방 비접촉 탐지/식별 기술": "자외선/적외선 등의 분광분석기술을 기반으로, 원거리 또는 원격의 화생방작용제로 인한 오염 및 환경변화를 탐지/식별하고 화생방 위협을 조기에 경보하는 기술",
            "화생방 피해분석 예측 기술": "화생방전 상황 하에서 전장통합 측면을 고려하여 적 화생방 공격에 의한 시설, 지역 등의 피해 정보를 탐지, 분석하고 지형 및 기상조건 변화에 따른 화생방작용제의 오염확산 및 피해예측을 판단하는 기술"
        },
        "제독": {
            "친환경 화생 제독 기술": "화생방작용제로 인한 개인, 장비, 시설, 지역 등의 오염제거/중화하는 환경 친화적 기술 및 제독 시 발생하는 2차 오염을 방지하기 위한 제독 부산물 등을 무해화하는 약품, 장비, 시설 등과 관련된 기술"
        },
        "해독": {
            "화학 작용제 해독 기술": "화학작용제로 인한 인명 피해를 예방, 진단, 치료할 수 있도록 대상작용제의 작용기제에 따라 대응 및 무력화하는 의학과 관련된 기술",
            "생물학 작용제 해독 기술": "생물학작용제로 인한 인명 피해를 예방, 진단, 치료할 수 있도록 대상작용제의 작용기제에 따라 대응 및 무력화하는 의학과 관련된 기술"
        },
        "화생방보호": {
            "화생방전 개인보호체계 기술": "화생방 위협 및 오염 환경에서 개인의 전투력 손실을 최대한 줄이면서 작전을 수행하기 위한 보호장비와 관련된 기술",
            "화생방 집단보호 시설/장비 기술": "다수의 인원 또는 장비 및 시설을 화생방 위협으로부터 방어하고 화생방 오염 환경에서 전투력 손실을 최대한 줄이면서 작전을 수행하기 위한 시설/장비와 관련된 기술"
        },
        "연막/차폐": {
            "다영역차폐및발연기술": "개인 또는 지역의 차폐를 목적으로 연막 또는 차폐제를 살포하거나 연소시켜 다영역대의 전자기파에 대한 탐지를 제한시키는 물질 또는 장비 기술"
        },
        "화생방검증/폐기": {
            "화생방작용제식별/검증 기술": "화생방 작용제의 오염 또는 확산 방지를 위하여 의심 지역에 대한 화학/생물학작용제 및 핵물질의 사용 여부를 정밀분석하고 확인하는 기술"
        }
    },
    "소재": {
        "내열/단열": {
            "고분자 재료 기술": "내열 및 내삭마 특성이 우수한 경량의 고분자재료의 성형 기법 및 시험평가 기법 기술",
            "무기체계용 내열/단열/방열 재료 및 응용 기술": "열적 특성이 요구되는 무기체계에 적용되어 내열/단열/방열 기능을 구현할 수 있는 소재 및 제조 기술과 그 적용을 위한 구조설계 기술"
        },
        "장갑/대장갑재료": {
            "장갑 재료 기술": "전차, 차량, 함정 등의 장비를 방호하기 위하여 금속, 세라믹 등 여러 종류의 소재를 활용한 장갑재료와 관련된 기술"
        },
        "특수재료": {
            "다목적 기타 특수재료 기술": "항공기, 함정 등 플랫폼 제작에 사용되는 세라믹, 복합재, 합금 및 기타 신소재 관련 기술"
        }
    },
    "플랫폼/구조": {
        "생존성/스텔스": {
            "플랫폼피탐지및피격성 감소 기술": "플랫폼의 피탐지 및 피격성 감소를 위한 기술로, RCS(레이더 유효반사 단면적) 감소를 위한 형상, RAM(레이더 전파 흡수물질), RAS(레이더 전파흡수 구조), IR(적외선)/음향/가시 피탐지 감소, 전자파/신호 관련 선택적 주파수 구조 등의 관련 기술 등을 플랫폼에 적용하는 기술",
            "취약성 감소를 위한 설계/해석 기술": "무기체계의 전투 생존성을 증대하기 위해 다양한 피격조건에 대한 취약성 감소 구조를 설계하고 효과를 정량적으로 분석하는 기술",
            "장갑 방호/방탄 형상 및 구조 기술": "전투원의 생존성 및 임무 지속성 향상을 위해 적의 화기 등 파괴무기로부터 아군 피해 최소화를 위한 방탄 형상/구조 기술과 수동, 반응, 능동 방호장치 등의 장갑방호 장치 관련 기술",
            "화재/손상통제및대피/탈출 기술": "피격/충돌 등으로 인한 손상을 빠르게 제어/복구하여 2차 피해 발생을 통제하고, 승무원의 손실을 최소화하기 위해 각종 피해 발생 시 피해지역에서 대피를 용이하게 하며, 파괴 시 신속하고 안전하게 탈출할 수 있도록 하는 기술"
        },
        "탑재구조체": {
            "화력장비 구조 설계/제작 기술": "탄약을 발사하기 위해 장전/송탄의 역할을 수행하는 총포신, 주퇴복좌장치, 포탑, 포신잠금장치 등의 구조물 및 장치와 관련된 기술",
            "발사장치 및 기타 탑재체 기술": "유도무기용 발사장치와 항공기용 플랫폼에 탑재되는 운용 보조장치에 대한 설계기술"
        },
        "해양체구조": {
            "해양체 구조 최적화/방호구조/방식 기술": "수상/수중에서 운용되는 무기체계의 구조를 최적화하고, 방호/방식 설계/해석을 통해 수상/수중환경에서 무기체계의 신뢰성을 확보하는 기술",
            "고속/스텔스 형상 설계/해석 기술": "함정 및 수중무기체계를 고속으로 운용하는 동시에 스텔스기술을 적용하기 위한 외형(외부형상 및 타 등의 부가물을 포함) 설계/해석 기술"
        },
        "비행체구조": {
            "유도무기 고속/고온/고기동 운용을 위한 기체 구조 기술": "고속/고온/고기동 비행환경에서 유도무기의 양력을 제공하고 목표지점까지 탑재장비를 손상 없이 운반하기 위한 구조물 및 기계 장치와 관련된 기술",
            "군사용 항공기체 구조 설계 및 해석 기술": "항공기에 가해지는 외부하중을 고려하여 구조물의 내부하중을 산출하고 구조 역학적으로 가장 적합하도록 항공기의 양력 및 비행안정성을 제공하는 기체의 내․외부 형상 및 기계장치와 관련된 기술",
            "공력설계 및 공력해석 기술": "비행체에 미치는 공기흐름의 영향을 고려하여 최적의 비행체 형상을 설계하기 위한 공력특성해석, 공력하중해석, 공력가열해석, 공탄성해석, 조종안정성해석, 풍동시험 등과 관련된 기술",
            "위성체 구조 및 설계 기술": "우주환경(극저온/극고온, 방사선 노출 등) 및 발사환경(진동, 충격, 음향 등)에서 운영되는 위성체 구조를 최적화하는 설계 기술"
        }
    }

}





# 고정된 Tampering 유형
TAMPERING_TYPES = ["패키징", "PCB", "칩", "코드", "SW"]

# AT 기술 DB 여기에 추가?
AT_TECH_DB = {
    "패키징 변조": ["AT 기술 1", "AT 기술 2"],
    "PCB 변조": ["AT 기술 3"],
    "칩 변조": ["AT 기술 4", "AT 기술 5"],
    "코드 변조": ["AT 기술 6"],
    "SW 변조": ["AT 기술 7"]
}

# 세션 상태 초기화
if "custom_tech_db" not in st.session_state:
    st.session_state["custom_tech_db"] = {
        "A": { "tampering": ["패키징"] },
        "B": { "tampering": ["코드"] },
        "C": { "tampering": ["패키징", "칩"] },
    }
if "page" not in st.session_state:
    st.session_state["page"] = "select_tamper"

st.set_page_config(page_title="AT Framework Tool", layout="wide")

# --- 1. 기술 선택 페이지 ---
if st.session_state["page"] == "select_tamper":
    st.markdown("<h1 style='text-align:center; color:#27374D;'>🛡️ AT Framework Tool</h1>", unsafe_allow_html=True)
    st.markdown("<br>", unsafe_allow_html=True)

    tech_list = list(st.session_state["custom_tech_db"].keys())
    if not tech_list:
        st.info("등록된 기술이 없습니다. 아래 버튼을 눌러 새로 등록해보세요.")
    else:
        selected_tech = st.selectbox("✅ 적용 기술 선택", options=tech_list, help="등록된 기술 중 하나를 선택하세요.")
        tampering_list = st.session_state["custom_tech_db"][selected_tech].get("tampering", [])

        if not tampering_list:
            st.warning("이 기술에는 Tampering 유형이 아직 등록되지 않았습니다.")
        else:
            selected_tamper = st.selectbox("🔍 Tampering 유형 선택", options=tampering_list)
            tamper_key = selected_tamper + " 변조"
            at_techs = AT_TECH_DB.get(tamper_key, [])

            st.markdown(
                f"""
                <div style="background-color:#e9edf5;padding:15px;border-radius:10px;border:1px solid #cfd8e3;">
                    <h4 style="color:#1f2f46;">📌 선택된 Tampering 유형: <span style="color:#374a67;">{selected_tamper}</span></h4>
                    <p style="margin-top:8px;font-size:16px;">
                    ▶ <b style="color:#1f2f46;">AT 기술:</b> <span style="color:#2c2c2c;">{', '.join(at_techs) if at_techs else "없음"}</span>
                    </p>
                </div>
                """,
                unsafe_allow_html=True
            )


    st.markdown("<hr>", unsafe_allow_html=True)
    if st.button("➕ 신규 기술 등록하기"):
        st.session_state["page"] = "add_custom"

# --- 2. 신규 기술 등록 페이지 ---
elif st.session_state["page"] == "add_custom":
    st.markdown("<h2 style='color:#1f2f46;'>➕ 신규 기술 등록</h2>", unsafe_allow_html=True)
    user_tech_name = st.text_input("📄 등록할 기술명을 입력하세요", placeholder="예: 미사일")

    st.markdown("<br><b style='color:#2e3c58;'>💥 적용할 Tampering 유형을 선택하세요</b>", unsafe_allow_html=True)
    selected_tampers = st.multiselect("", TAMPERING_TYPES)

    if st.button("✅ 기술 등록하기", use_container_width=True):
        if not user_tech_name:
            st.error("기술명을 입력해주세요.")
        elif user_tech_name in st.session_state["custom_tech_db"]:
            st.warning("이미 등록된 기술입니다.")
        elif not selected_tampers:
            st.warning("최소 하나 이상의 Tampering 유형을 선택하세요.")
        else:
            st.session_state["custom_tech_db"][user_tech_name] = {
                "tampering": selected_tampers
            }
            st.success(f"✅ '{user_tech_name}' 기술이 등록되었습니다!")
            st.session_state["page"] = "select_tamper"

    if st.button("◀ 돌아가기", use_container_width=True):
        st.session_state["page"] = "select_tamper"




